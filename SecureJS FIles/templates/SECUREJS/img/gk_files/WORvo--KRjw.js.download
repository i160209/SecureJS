if (self.CavalryLogger) { CavalryLogger.start_js(["A4Z2v"]); }

__d("ContentSearchEvents",[],(function(a,b,c,d,e,f){e.exports={CONTENT_SEARCH:"content_search",OPEN_TRAY:"open_tray",QUERY_RESULTS_LOADED:"query_results_loaded",RESULT_SENT:"result_sent",namesByValue:{content_search:"CONTENT_SEARCH",open_tray:"OPEN_TRAY",query_results_loaded:"QUERY_RESULTS_LOADED",result_sent:"RESULT_SENT"}}}),null);
__d("MessengerPlatformQueryType",[],(function(a,b,c,d,e,f){e.exports={SEARCH:0,MEDIAFY:1,TRENDING:2,SAMPLE:3,namesByValue:["SEARCH","MEDIAFY","TRENDING","SAMPLE"]}}),null);
__d("XMessengerPlatformContentSearchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/content_search/",{ftentidentifier:{type:"String"},q:{type:"String",defaultValue:""},qtype:{type:"Enum",defaultValue:0,enumType:0},resume:{type:"String",defaultValue:""},"interface":{type:"Enum",enumType:0},platform_fbids:{type:"IntVector"}})}),null);
__d("ChatContentSearch",["AsyncRequest","MessengerPlatformQueryType","XMessengerPlatformContentSearchController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getContentForQuery:function(a){__p&&__p();var c=a.query,d=a.callback,e=a.ftentidentifier,f=a.resume,g=a.searchInterface;a=a.platformFBIDs;f=b("XMessengerPlatformContentSearchController").getURIBuilder().setString("resume",f);c!=null&&c.length>0?f.setString("q",c):f.setEnum("qtype",b("MessengerPlatformQueryType").TRENDING);g!=null&&f.setEnum("interface",g);a!=null&&f.setIntVector("platform_fbids",a);e!=null&&f.setString("ftentidentifier",e);c=new(b("AsyncRequest"))().setURI(f.getURI()).setHandler(d);c.send();return c}};e.exports=a}),null);
__d("ChatContentSearchResult.react",["cx","fbt","AddCommentFlyoutSizeType","Image.react","Keys","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=274,j=308,k=137,l=152;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a.stopPropagation(),d.props.onClick(d.props.result)},d.$2=function(a){a.keyCode===b("Keys").RETURN&&(a.preventDefault(),d.props.onClick(d.props.result))},c)||babelHelpers.assertThisInitialized(d)}c.isWide=function(a){a=a.media.preview;return a.width>a.height*1.2};c.getScaledDimensions=function(a,b,c){a=a.media.preview;var d=a.height;a=a.width;var e=c?l:k;c=c?j:i;b=(b?c:e)/a;d*=b;a*=b;return{height:d,width:a}};var d=c.prototype;d.render=function(){var a=c.getScaledDimensions(this.props.result,this.props.isWide,this.props.size==="large");return b("React").createElement(b("ShimButton.react"),{"aria-label":h._("GIF"),"data-testid":this.props["data-testid"],onClick:this.$1,onKeyPress:this.$2},b("React").createElement(b("Image.react"),{className:"_358"+(this.props.isWide?" _26n6":""),src:this.props.src,style:a}))};return c}(b("React").PureComponent);a.defaultProps={size:b("AddCommentFlyoutSizeType").SMALL};e.exports=a}),null);
__d("ChatContentSearchResults.react",["cx","fbt","ix","Bootloader","ChatContentSearch","ChatContentSearchResult.react","Image.react","MercuryConfig","MessengerSpinner.react","React","ScrollableArea.react","debounce","emptyFunction","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={};function k(a){return a.replace(/^httpss/,"https")}var l={isLoading:!0,response:null,results:[]};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state=l;d.$12=function(){var a=b("performanceAbsoluteNow")(),c=d.state.results?d.state.results.length:0;b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.COMPOSER_INTERACTION,"load_gif_result",JSON.stringify({length:c}),0,a)},"ChatContentSearchResults.react");d.$12=b("emptyFunction")};d.$6=function(){d.$7();d.$4=Date.now();if(d.state.response&&(!d.state.response.resultNextCursor||!d.props.query))return;var a=d.$13();d.setState({isLoading:!0});d.$1=b("ChatContentSearch").getContentForQuery({query:d.props.query,resume:a,callback:d.$14,searchInterface:d.props.searchInterface,platformFBIDs:d.props.platformFBIDs,ftentidentifier:d.props.ftentidentifier})};d.$14=function(a){d.$1===a.request&&(j=babelHelpers["extends"]({},j,a.payload.attribution),d.setState(function(b){return{isLoading:!1,response:a.payload,results:a.payload.resultGroup[0]?b.results.concat(a.payload.resultGroup[0].results):b.results}},function(){d.$4!==void 0&&(d.props.onResultsLoaded&&d.props.onResultsLoaded(Date.now()-d.$4),delete d.$4)}),delete d.$1)};d.$17=function(a){d.props.onSelect(a,j[a.platformFBID])};d.$9=function(){d.$18()&&!d.$1&&d.$2()};d.$5=function(a){d.setState(l,a)};d.$2=b("emptyFunction");d.$3=b("emptyFunction");return d}var d=c.prototype;d.componentDidMount=function(){this.$3=b("debounce")(this.$5,100),this.$2=b("debounce")(this.$6,200),this.$2()};d.componentWillUnmount=function(){this.$2.reset(),this.$3.reset(),this.$7()};d.componentDidUpdate=function(a){this.props.query!==a.query&&this.$3(this.$6)};d.render=function(){return(!this.state.response||!this.state.results.length)&&!this.state.isLoading?this.$8():b("React").createElement(b("ScrollableArea.react"),{"data-testid":this.props["data-testid"],fade:!0,onScroll:this.$9,ref:"scrollable"},this.$10(),this.$11())};d.$11=function(){return!this.state.isLoading?null:b("React").createElement("div",{style:{marginTop:this.state.response?"10px":"140px",textAlign:"center"}},b("React").createElement(b("MessengerSpinner.react"),{color:"grey",size:b("MessengerSpinner.react").medium_size}))};d.$13=function(){return this.state.response?this.state.response.resultNextCursor:void 0};d.$7=function(){this.setState({isLoading:!1}),this.$1&&(this.$1.abort(),delete this.$1,delete this.$4)};d.$8=function(){return b("React").createElement("div",{className:"_85jd"},b("React").createElement(b("Image.react"),{src:i("87146")}),b("React").createElement("p",null,h._("No GIFs to show")))};d.$10=function(){var a=this;return!this.state.response||!this.state.results.length?null:this.state.results.map(function(c,d){var e=b("ChatContentSearchResult.react").isWide(c);if(!e&&c.platformFBID.toString()!==b("MercuryConfig").MessengerAppID){var f=d-a.$15(d),g=a.$16(d)-d;e=(f<=1||f%2!==0)&&g<=1}a.$12();return b("React").createElement(b("ChatContentSearchResult.react"),{isWide:e,"data-testid":a.props["data-testid"]+"-items-"+d,key:"result:"+d+":"+c.resultID,onClick:a.$17,result:c,src:k(c.media.preview.url),size:a.props.size})})};d.$15=function(a){a=a;while(a>0){--a;if(b("ChatContentSearchResult.react").isWide(this.state.results[a]))return a}return a};d.$16=function(a){a=a;var c=this.state.results.length;while(a<c-1){++a;if(b("ChatContentSearchResult.react").isWide(this.state.results[a]))return a}return a};d.$18=function(){var a=this.refs.scrollable.getArea();return!!(a&&a.distanceToBottom()<=50)};return c}(b("React").PureComponent);a.defaultProps={"data-testid":"search-results",size:"small"};e.exports=a}),null);
__d("ChatContentSearchTrendingIndicator.react",["cx","fbt","ix","Image.react","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return a.shown!==this.props.shown};d.render=function(){return this.props.shown?b("React").createElement("div",{className:"_515"},b("React").createElement(b("Image.react"),{src:i("28005")}),h._("Trending")):null};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerSearchInput.react",["cx","AbstractTextInput.react","React","XUICloseButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.focusInput=function(){c.refs.inputField.focusInput()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_5iwm"+(this.props.isFocused||!!this.props.value?" _5iwn":"")),role:"search"},b("React").createElement(b("AbstractTextInput.react"),{className:"_3deo",onBlur:this.props.onBlur,onChange:this.props.onChange,onClick:this.props.onClick,onEnter:this.props.onEnter,onFocus:this.props.onFocus,placeholder:this.props.placeholder,ref:"inputField",value:this.props.value}),b("React").createElement(b("XUICloseButton.react"),{size:"small",onMouseDown:this.props.onClear,className:(this.props.value.length===0?"hidden_elem":"")+" _2xme"}))};return c}(b("React").PureComponent);c.propTypes={isFocused:a.bool,onBlur:a.func,onChange:a.func,onClear:a.func,onClick:a.func,onEnter:a.func,onFocus:a.func,placeholder:a.node,value:a.string.isRequired};e.exports=c}),null);
__d("ChatContentSearchFlyout.react",["cx","fbt","AddCommentFlyoutSizeType","BanzaiLogger","Bootloader","ChatContentSearchResults.react","ChatContentSearchTrendingIndicator.react","ContentSearchEvents","Keys","MercuryShareAttachmentRenderLocations","MessengerPlatformInterfaceType","MessengerSearchInput.react","React","UFISearchInput.react","XUITextInput.react","performanceAbsoluteNow","qex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=" ",j=/\s+/g,k=b("MercuryShareAttachmentRenderLocations").COMPOSER,l=b("MercuryShareAttachmentRenderLocations").MESSENGER,m=b("MercuryShareAttachmentRenderLocations").CHAT,n=406655189415060;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={query:d.props.query,viewerEnteredText:!1},d.$10=function(a){d.setState({query:a.target.value,viewerEnteredText:d.$9()||a.target.value.length>0})},d.$5=function(a){a.keyCode===b("Keys").ESC&&d.props.onEscKeyDown&&d.props.onEscKeyDown()},d.$8=function(a,c){d.$11(),d.props.onSelect(a,c),b("BanzaiLogger").log("ContentSearchLoggerConfig",{event:b("ContentSearchEvents").RESULT_SENT,query:d.state.query,resultid:a.resultID})},d.$7=function(a){b("BanzaiLogger").log("ContentSearchLoggerConfig",{event:b("ContentSearchEvents").QUERY_RESULTS_LOADED,query:d.state.query,inflighttime:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(){var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerPoint(c.COMPOSER_INTERACTION,"mount_gif_flyout","",0,a)},"ChatContentSearchFlyout.react")};d.componentDidMount=function(){this.$2(),b("BanzaiLogger").log("ContentSearchLoggerConfig",{event:b("ContentSearchEvents").OPEN_TRAY,query:this.state.query}),this.$1&&(this.$1.focusInput&&this.$1.focusInput())};c.getDerivedStateFromProps=function(a,b){return!b.viewerEnteredText?babelHelpers["extends"]({},b,{query:a.query}):b};d.render=function(){var a=this.$3(this.props.queryDefault),c=this.$4();return b("React").createElement("div",{className:"_85nf",onKeyDown:this.$5,"data-testid":"mercury-content-search-flyout"},b("React").createElement("div",{className:"_3mtr"},this.$6()),b("React").createElement("div",{className:"_3mts"},b("React").createElement(b("ChatContentSearchResults.react"),{"data-testid":"mercury-content-search-flyout-results",ftentidentifier:this.props.ftentidentifier,onResultsLoaded:this.$7,onSelect:this.$8,query:c,searchInterface:this.props.searchInterface,size:this.props.size,platformFBIDs:a.length===0?[]:[n]}),b("React").createElement(b("ChatContentSearchTrendingIndicator.react"),{shown:b("qex")._("1125322")?!1:c.length===0})))};d.$4=function(){var a=this.$3(this.state.query),b=this.$3(this.props.queryDefault);return(this.$9()?a:a.length===0?b:a)||""};d.$6=function(){var a=this,c=this.$9(),d=this.props.location===l?b("MessengerSearchInput.react"):this.props.location===k?b("UFISearchInput.react"):b("XUITextInput.react");return b("React").createElement(d,{className:"_4qcs",isFocused:!0,onClick:function(a){return a&&a.stopPropagation()},onChange:this.$10,onClear:function(){a.setState({query:c?"":a.props.queryDefault,viewerEnteredText:c})},placeholder:h._("Search GIFs across apps..."),ref:function(b){return a.$1=b},value:this.state.query||""})};d.$3=function(a){return(a||"").trim().replace(j,i).toLowerCase()};d.$11=function(){var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerPoint(c.COMPOSER_INTERACTION,"send_gif","",0,a),b.markerEnd(c.COMPOSER_INTERACTION,"SUCCESS",0,a)},"ChatContentSearchFlyout.react")};d.$9=function(){return this.props.location===l||this.props.location===m};return c}(b("React").PureComponent);c.propTypes={ftentidentifier:a.string,location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),onEscKeyDown:a.func,onSelect:a.func.isRequired,query:a.string,searchInterface:a.oneOf([b("MessengerPlatformInterfaceType").UNKNOWN_INTERFACE,b("MessengerPlatformInterfaceType").FB_INTERFACE,b("MessengerPlatformInterfaceType").FB_POST_INTERFACE,b("MessengerPlatformInterfaceType").MESSENGER_INTERFACE]),size:a.oneOf(Object.values(b("AddCommentFlyoutSizeType"))),queryDefault:a.string};c.defaultProps={size:b("AddCommentFlyoutSizeType").SMALL};e.exports=c}),null);
__d("ReactComposerGIFToggleController.react",["Arbiter","ChatContentSearchFlyout.react","LayerTabIsolation","MessengerPlatformInterfaceType","React","ReactComposerContextTypes","ReactComposerEvents","ReactComposerScrapedAttachmentActions","ReactComposerTaggerActions","ReactComposerTaggerType","XUIContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("ReactComposerTaggerActions").selectTagger(d.context.composerID,d.props.loggingName,b("ReactComposerTaggerType").GIF,!1)},d.$3=function(){d.props.showFlyout&&b("ReactComposerTaggerActions").deselectCurrentTagger(d.context.composerID,d.props.loggingName)},d.$4=function(a){b("ReactComposerScrapedAttachmentActions").scrapeAttachment(d.context.composerID,d.context.targetID,a.source.url,d.context.composerType,d.context.actorID,d.props.loggingName),b("ReactComposerTaggerActions").setTaggerData(d.context.composerID,d.props.loggingName,b("ReactComposerTaggerType").GIF,{gifData:{url:a.source.url}}),d.$3(),b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+d.context.composerID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("span",{onClick:this.props.onClick||this.$1,role:"presentation"},b("React").createElement("span",{className:this.props.spanClassName,ref:"container"},this.props.children),this.$2())};d.$2=function(){var a=this;return!this.props.showFlyout?null:b("React").createElement(b("XUIContextualDialog.react"),{alignment:this.props.alignment||"left",behaviors:{LayerTabIsolation:b("LayerTabIsolation")},contextRef:function(){return a.refs.container},onBlur:this.props.onBlur||this.$3,onToggle:function(b){!b&&a.props.showFlyout&&(a.props.onBlur&&a.props.onBlur()||a.$3())},position:"below",shown:this.props.showFlyout,hasActionableContext:!0,width:278},b("React").createElement("div",null,b("React").createElement(b("ChatContentSearchFlyout.react"),{onEscKeyDown:this.props.onBlur||this.$3,onSelect:this.props.onSelect||this.$4,searchInterface:b("MessengerPlatformInterfaceType").FB_POST_INTERFACE,shown:this.props.showFlyout})))};return c}(b("React").PureComponent);a.contextTypes=b("ReactComposerContextTypes");e.exports=a}),null);
__d("XWifiAuthReleaseAccessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/wifiauth/release_access/",{gw_id:{type:"FBID",required:!0},redirect_mac:{type:"String",required:!0},redirect_url:{type:"String",required:!0},login_type:{type:"Enum",required:!0,enumType:0}})}),null);
__d("ReactSocialWifiComposer.react",["fbt","Arbiter","React","ReactComposerAttachmentType","ReactComposerBodyContainer.react","ReactComposerConfig","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerEvents","ReactComposerFeedPostButtonContainer.react","ReactComposerLazyHeader.react","ReactComposerLoggingName","ReactComposerPrefillConfig","ReactComposerPrefillUtils","ReactComposerSproutsStatusAndMediaSelector.react","ReactComposerStatusEagerAttachment.react","ReactComposerWithSprouts.react","XWifiAuthReleaseAccessController","goURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=a.shape({gw_id:a.string.isRequired,redirect_mac:a.string.isRequired,redirect_url:a.string.isRequired});d=b("React").createClass({displayName:"ReactSocialWifiComposer",mixins:[b("ReactComposerContextProviderMixin")],propTypes:{contextConfig:b("ReactComposerContextConfig").isRequired,config:b("ReactComposerConfig").isRequired,prefillConfig:b("ReactComposerPrefillConfig").isRequired,gateway:c.isRequired},UNSAFE_componentWillMount:function(){var a=this;b("ReactComposerPrefillUtils").prefill(this.props.contextConfig.composerID,this.props.prefillConfig,this.props.contextConfig.gks);b("Arbiter").subscribe(b("ReactComposerEvents").POST_SUCCEEDED+this.props.contextConfig.composerID,function(){b("goURI")(b("XWifiAuthReleaseAccessController").getURIBuilder().setFBID("gw_id",a.props.gateway.gw_id).setString("redirect_mac",a.props.gateway.redirect_mac).setString("redirect_url",a.props.gateway.redirect_url).setEnum("login_type",1).getURI())})},render:function(){var a=this.props.config.attachmentsConfig;a=[b("React").createElement(b("ReactComposerSproutsStatusAndMediaSelector.react"),{key:b("ReactComposerLoggingName").STATUS_TAB_SELECTOR,label:a[b("ReactComposerAttachmentType").STATUS].tabTitle,statusOnly:!1})];return b("React").createElement(b("ReactComposerWithSprouts.react"),{defaultAttachmentOnExpand:b("ReactComposerAttachmentType").STATUS,innerProps:{loggingConfig:this.props.config.loggingConfig,sproutsConfig:this.props.config.sproutsConfig},ref:"root"},b("React").createElement(b("ReactComposerLazyHeader.react"),{background:"light-wash",noHorizontalMargin:!0,showDelimiter:!1},a),b("React").createElement(b("ReactComposerBodyContainer.react"),null,b("React").createElement(b("ReactComposerStatusEagerAttachment.react"),{key:"status",config:this.props.config,selected:!0,postButtonModule:b("ReactComposerFeedPostButtonContainer.react"),postButtonLabel:g._("Check In"),prefillConfig:this.props.prefillConfig})))}});e.exports=d}),null);
__d("ReactComposerGIFSproutContainer.react",["cx","FluxContainer","React","ReactComposerAttachmentStore","ReactComposerContextTypes","ReactComposerDisabledSproutItem.react","ReactComposerGIFToggleController.react","ReactComposerMediaUploadStore","ReactComposerScrapedAttachmentStore","ReactComposerSproutItem.react","ReactComposerSproutsDefaultUIConfigTyped","ReactComposerTaggerStore","ReactComposerTaggerType"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("ReactComposerTaggerStore"),b("ReactComposerScrapedAttachmentStore"),b("ReactComposerAttachmentStore"),b("ReactComposerMediaUploadStore")]};c.calculateState=function(a,c,d){a=d.composerID;return{highlighted:b("ReactComposerTaggerStore").hasData(a,b("ReactComposerTaggerType").GIF),isDisabled:b("ReactComposerTaggerStore").isDisabled(a,b("ReactComposerTaggerType").GIF)||b("ReactComposerAttachmentStore").isContentMultiShareAttachment(a),isSelected:b("ReactComposerTaggerStore").getSelectedTagger(a)===b("ReactComposerTaggerType").GIF}};var d=c.prototype;d.render=function(){return this.state.isDisabled?b("React").createElement(b("ReactComposerDisabledSproutItem.react"),{uiConfig:this.props.uiConfig}):b("React").createElement(b("ReactComposerGIFToggleController.react"),babelHelpers["extends"]({},this.props,{showFlyout:this.state.isSelected,spanClassName:"_4mvf",loggingName:this.props.uiConfig.loggingName}),b("React").createElement(b("ReactComposerSproutItem.react"),{uiConfig:this.props.uiConfig,highlighted:this.state.highlighted}))};return c}(b("React").PureComponent);a.defaultProps={uiConfig:b("ReactComposerSproutsDefaultUIConfigTyped").sproutsUIConfigMap.GIF};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);